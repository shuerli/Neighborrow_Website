<link
  rel="stylesheet"
  href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
/>
<style>
  .ui-autocomplete {
    position: absolute;
    z-index: 1030 !important;
  }
</style>

<ol class="breadcrumb d-xl-none d-lg-none">
  <div class="row text-center" style="width:100%">
    <input
      type="text"
      style="width:80%;margin-left:10%"
      class="form-control"
      placeholder="Looking for something?"
	  id="item-searchbar-sub"
	  onkeyup="searchbarAjax_trigger_sub(this)"
    />
    <button class="btn btn-primary" style="margin-left:-30px">
      <i class="fa fa-search"></i>
    </button>
  </div>
</ol>
<ol class="breadcrumb d-md-down-none">
  <li class="breadcrumb-item"><a href="#">Step 1</a></li>
  <li class="breadcrumb-item"><a href="#">Step 2</a></li>
  <li class="breadcrumb-item active">Step 3</li>
</ol>

<script>
	
	$("#item-searchbar-sub").autocomplete({ source: keywordList_cache });
	$("#item-searchbar-sub").on("keyup paste", function() {
    $("#item-searchbar-main").val($(this).val());
	});
  let searchbarAjax_trigger_sub = ptr => {
	$('#item-searchbar-main').val(ptr.value);
    if (ptr.value.length > 2) {
      $.get("/search/keyword_prompt?input=" + ptr.value, function(data) {
		  console.log(data);
        if (data.result.length > 0) {
			keywordList_cache = data.result.map(x => x.name);
          $("#item-searchbar-sub").autocomplete("option", {
            source: keywordList_cache
          });
        }
      });
    }
	};
	document
    .getElementById("item-searchbar-sub")
    .addEventListener("keyup", function(event) {
      event.preventDefault();
      if (event.keyCode === 13) {
        window.location = "/result?keyword="+$("#item-searchbar-sub").val()+"&location=Toronto"
      }
    });
</script>
